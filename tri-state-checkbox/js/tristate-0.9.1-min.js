/* 
 --- Tristate Checkbox ---
v 0.9.1 18th Dec 2008
By Shams Mahmood
http://shamsmi.blogspot.com 
*/
var STATE_NONE=0;var STATE_SOME=1;var STATE_ALL=2;var UNCHECKED_NORM="UNCHECKED_NORM";var UNCHECKED_HILI="UNCHECKED_HILI";var INTERMEDIATE_NORM="INTERMEDIATE_NORM";var INTERMEDIATE_HILI="INTERMEDIATE_HILI";var CHECKED_NORM="CHECKED_NORM";var CHECKED_HILI="CHECKED_HILI";var DEFAULT_CONFIG={UNCHECKED_NORM:"http://lh6.ggpht.com/_c_AszxFWLLs/SUrdffHaeiI/AAAAAAAACkw/uXPxlSq7ZME/s144/unchecked.gif",UNCHECKED_HILI:"http://lh4.ggpht.com/_c_AszxFWLLs/SUrdfZ1ojEI/AAAAAAAACk4/5YVi4rip30A/s144/unchecked_highlighted.gif",INTERMEDIATE_NORM:"http://lh5.ggpht.com/_c_AszxFWLLs/SUrdbwoLc0I/AAAAAAAACkg/SvmbPidI2-o/s144/intermediate.gif",INTERMEDIATE_HILI:"http://lh5.ggpht.com/_c_AszxFWLLs/SUrdbwtXDOI/AAAAAAAACko/82v692p5tno/s144/intermediate_highlighted.gif",CHECKED_NORM:"http://lh3.ggpht.com/_c_AszxFWLLs/SUrdbiLuQCI/AAAAAAAACkQ/faUYorb0WT8/s144/checked.gif",CHECKED_HILI:"http://lh4.ggpht.com/_c_AszxFWLLs/SUrdb6se_WI/AAAAAAAACkY/Khw5XhX0T5Y/s144/checked_highlighted.gif"};function getNextStateFromValue(A){if(A==STATE_SOME){return STATE_ALL}if(A==STATE_ALL){return STATE_NONE}return STATE_SOME}function getStateFromValue(B,A){if(B==STATE_SOME){return(!A)?INTERMEDIATE_NORM:INTERMEDIATE_HILI}if(B==STATE_ALL){return(!A)?CHECKED_NORM:CHECKED_HILI}return(!A)?UNCHECKED_NORM:UNCHECKED_HILI}function getFieldAndContainerIds(C){var D=C.substring(0,C.length-".Img".length);var B=document.getElementById(D+".Field").value;var A=document.getElementById(D+".Container").value;return[B,A]}function getAllCheckboxesInContainer(C){var B=document.getElementById(C);var G=B.getElementsByTagName("input");var F=new Array();var E=0;for(var A=0;A<G.length;A++){var D=G[A];if(D.type=="checkbox"){F[E++]=D}}return F}function selectOrUnselectBoxes(C,B){for(var A in C){C[A].checked=B}}function areAllBoxesInGivenCheckedState(C,D){var B=true;for(var A=0;A<C.length;A++){if(C[A].checked!=D){B=false;break}}return B}function replaceImage(A,C){var B=document.getElementById(A);if(B.src!=C){B.src=C}}function mouseOverOutOfImageFunction(C,A){var E=getFieldAndContainerIds(C);var B=document.getElementById(E[0]);var D=getStateFromValue(B.value,A);return DEFAULT_CONFIG[D]}function onMouseOverImageFnc(A){return function(){var B=mouseOverOutOfImageFunction(A,true);replaceImage(A,B)}}function onMouseOutImageFnc(A){return function(){var B=mouseOverOutOfImageFunction(A,false);replaceImage(A,B)}}function onTristateImageClickFnc(A){return function(){var E=getFieldAndContainerIds(A);var D=document.getElementById(E[0]);var C=getNextStateFromValue(D.value);if(C==STATE_SOME){C=getNextStateFromValue(C)}D.value=C;var B=getAllCheckboxesInContainer(E[1]);selectOrUnselectBoxes(B,C==STATE_ALL);var F=mouseOverOutOfImageFunction(A,true);replaceImage(A,F)}}function onCheckboxClickFnc(A,B){return function(){var E=getFieldAndContainerIds(A);var C=getAllCheckboxesInContainer(E[1]);var D=document.getElementById(E[0]);updateStateAndImage(C,D,A)}}function updateStateAndImage(B,D,C){var A=areAllBoxesInGivenCheckedState(B,true);var E=areAllBoxesInGivenCheckedState(B,false);if(A){D.value=STATE_ALL}else{if(E){D.value=STATE_NONE}else{D.value=STATE_SOME}}var F=mouseOverOutOfImageFunction(C,false);replaceImage(C,F)}function initTriStateCheckBox(A,D){var E=document.getElementById(A);var B=A+"Value";var H=E.childNodes[0];E.removeChild(H);var I=document.createElement("input");I.id=B;I.type="hidden";I.value=STATE_NONE;E.appendChild(I);var L=new Image();L.id=A+".Img";L.src=DEFAULT_CONFIG[UNCHECKED_NORM];E.appendChild(L);if(E.addEventListener){E.addEventListener("mouseover",onMouseOverImageFnc(L.id),false);E.addEventListener("mouseout",onMouseOutImageFnc(L.id),false);E.addEventListener("click",onTristateImageClickFnc(L.id),false)}else{if(E.attachEvent){E.attachEvent("onmouseover",onMouseOverImageFnc(L.id));E.attachEvent("onmouseout",onMouseOutImageFnc(L.id));E.attachEvent("onclick",onTristateImageClickFnc(L.id))}}var C=document.createElement("input");C.id=A+".Field";C.type="hidden";C.value=B;E.appendChild(C);var F=document.createElement("input");F.id=A+".Container";F.type="hidden";F.value=D;E.appendChild(F);E.appendChild(H);var G=getAllCheckboxesInContainer(D);for(var J in G){var K=G[J];if(K.addEventListener){K.addEventListener("click",onCheckboxClickFnc(L.id,K.id),false)}else{if(K.attachEvent){K.attachEvent("onclick",onCheckboxClickFnc(L.id,K.id))}}}updateStateAndImage(G,I,L.id)};